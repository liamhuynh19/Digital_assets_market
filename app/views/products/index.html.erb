<% content_for :title, "Products" %>

<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="mb-0">Products</h1>
  </div>

  <div class="row mb-4">
    <div class="col-12">
      <div class="d-flex justify-content-between align-items-center">
        <h2 class="gradient-text">Digital Assets</h2>
        <div class="filters d-flex gap-2">
          <select class="form-select form-select-sm glass-select">
            <option>Latest</option>
            <option>Most Popular</option>
            <option>Price: Low to High</option>
            <option>Price: High to Low</option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <div class="row g-4">
    <% @products.each do |product| %>
      <div class="col-12 col-md-6 col-lg-4">
        <div class="card product-card h-100">
          <div class="card-image-wrapper">
            <%= image_tag product.file_url.presence || asset_path("place_holder.jpg"), class: "card-img-top product-image" %>
            <div class="card-overlay">
              <div class="overlay-buttons">
                <%= link_to product_path(product), class: "btn btn-light btn-sm glass-button" do %>
                  <i class="fas fa-eye"></i> View
                <% end %>
                <%= button_to cart_add_to_cart_path(@cart, product), 
                    class: "btn btn-primary btn-sm glass-button ms-2",
                    form: { class: "d-inline-block" },
                    data: { turbo: true } do %>
                  <i class="fas fa-cart-plus"></i> Add to Cart
                <% end %>
                
              </div>
            </div>
          </div>
          
          <div class="card-body">
            <h5 class="card-title mb-1"><%= product.name %></h5>
            <p class="text-muted small mb-2">
              <i class="fas fa-tag me-1"></i>
              <%= product.category&.name %>
            </p>
            <div class="d-flex justify-content-between align-items-center">
              <div class="price-tag">
                <span class="price">$<%= number_with_precision(product.price, precision: 2) %></span>
              </div>
              <div class="rating">
                <% product.average_rating.to_i.times do %>
                  <i class="fas fa-star text-warning"></i>
                <% end %>
                <% (5 - product.average_rating.to_i).times do %>
                  <i class="far fa-star text-warning"></i>
                <% end %>
              </div>
            </div>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  
</div>

<% content_for :styles do %>
  <style>
    .gradient-text {
      background: linear-gradient(45deg, #2686a3, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
    }

    .glass-select {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .product-card {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.2);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      transition: all 0.3s ease;
      border-radius: 15px;
      overflow: hidden;
    }

    .product-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
    }

    .card-image-wrapper {
      position: relative;
      overflow: hidden;
      padding-top: 75%;
    }

    .product-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .card-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .product-card:hover .card-overlay {
      opacity: 1;
    }

    .product-card:hover .product-image {
      transform: scale(1.1);
    }

    .glass-button {
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all 0.3s ease;
    }

    .glass-button:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    .price-tag {
      background: linear-gradient(45deg, #2686a3, #764ba2);
      padding: 5px 10px;
      border-radius: 20px;
    }

    .price {
      color: white;
      font-weight: 600;
    }
  </style>
<% end %>
