<div class="container py-5">
  <div class="profile-hero p-4 p-md-5 mb-4">
    <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3">
      <div>
        <h3 class="mb-1"><%= @user.name.presence || @user.email %></h3>
        <div class="opacity-75"><%= @user.role.titleize %></div>
      </div>
      <div class="d-flex gap-2">
        <%= link_to "My Orders", orders_path, class: "btn btn-hero-contrast fw-semibold" %>
        <%= link_to "Purchased Products", purchased_products_path, class: "btn btn-hero-contrast fw-semibold" %>
      </div>
    </div>
  </div>

  <div class="row g-3 mb-4">
    <div class="col-md-3">
      <div class="metric-card p-3 h-100">
        <div class="d-flex align-items-center justify-content-between">
          <div>
            <div class="metric-label">Orders</div>
            <div class="d-flex align-items-baseline gap-2">
              <div class="metric-value"><%= @orders_count %></div>
              <span class="badge badge-soft">Paid: <%= @paid_orders_count %></span>
            </div>
          </div>
          <div class="metric-icon icon-purple">
            <i class="fas fa-receipt"></i>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="metric-card p-3 h-100">
        <div class="d-flex align-items-center justify-content-between">
          <div>
            <div class="metric-label">Total spent</div>
            <div class="metric-value">$<%= number_with_precision(@total_spent, precision: 2) %></div>
          </div>
          <div class="metric-icon icon-green">
            <i class="fas fa-wallet"></i>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="metric-card p-3 h-100">
        <div class="d-flex align-items-center justify-content-between">
          <div>
            <div class="metric-label">Products purchased</div>
            <div class="metric-value"><%= @purchased_products_count %></div>
          </div>
          <div class="metric-icon icon-blue">
            <i class="fas fa-boxes-stacked"></i>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="metric-card p-3 h-100">
        <div class="d-flex align-items-center justify-content-between">
          <div>
            <div class="metric-label">Avg. order value</div>
            <div class="metric-value">
              $<%= number_with_precision(@paid_orders_count.to_i.zero? ? 0 : (@total_spent.to_f / @paid_orders_count), precision: 2) %>
            </div>
          </div>
          <div class="metric-icon icon-orange">
            <i class="fas fa-chart-line"></i>
          </div>
        </div>
      </div>
    </div>
    
    <%= render 'seller_application_card' if current_user.buyer? %>
  </div>
</div>